  <!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8 vi">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>HRM</title>

    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}"> 
    <link href="{{ url_for('static', filename='css/index.css') }}" rel="stylesheet" type="text/css" />
    <link href="{{ url_for('static', filename='css/base.css') }}" rel="stylesheet" type="text/css" />
    <link href="{{ url_for('static', filename='icons/fontawesome-free-6.1.1-web/css/all.css') }}" rel="stylesheet" type="text/css" />
    <link rel="icon" href="{{ url_for('static', filename='image/icon-image.png') }}">
    <!-- Js -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.5/xlsx.full.min.js"></script>
</head>
<body>
    <!-- header -->
    <header class="header">
        <div class="hrm-title">
            <div class="title close">
                <h4>HRM Admin</h4>
            </div>
            <div class="icon-nav close">
                <i class="fa-solid fa-bars"></i>
            </div>
        </div>

        <!--header account-->
        <div class="account" id="dropdown">
            <div class="image-account">
                <img class="avatar-account" src="{{ url_for('static', filename='image/icon-image.png') }}" alt="hrm-icon">
            </div>

            <div class="account-title">
                <h4>CTy TNHH</h4>
            </div>

            <div class="icon-account">
                <i class="fa-solid fa-angle-down"></i>
            </div>
            <div class="dropdown-content">
                <!-- <a href="{{ url_for('logout') }}">
                    <i class="fa-solid fa-right-from-bracket"></i>
                    Đăng xuất
                </a>                 -->
                <a href="{{ url_for('logout') }}">
                    <i class="fa-solid fa-right-from-bracket"></i>
                    Đăng xuất
                </a>
                
                <script>
                    function logout() {
                        // Use JavaScript to make a POST request to the /logout route
                        fetch('/logout', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify({}),
                        })
                        .then(response => response.json())
                        .then(() => {
                            // Redirect the user to the root URL after logout
                            window.location.href = '/';
                        })
                        .catch(error => console.error('Logout failed:', error));
                    }
                </script>
                
            </div>
        </div>

    </header>

    <div class="grid_system_column close container">
        <!-- 20% -->
        <div class="container-nav_bar">
            <div class="nav_bar-function">
                 <div class="nav_bar-function-content close"> <!-- Quản lí nhân viên -->
                    <i class="nav_bar-function-icon fa-solid fa-sitemap fa-lg"></i>
                    <a href="employee-manager.html">Quản lí nhân viên</a>
                    <div class="function-icon_arrow_Manager">
                        <i class="nav_bar-function-icon fa-solid fa-angle-up"></i>
                    </div>
                </div>
                <div class="nav_bar-function_child">
                    <ul class="nav_bar-function_child_Manager none">
                        <li class="nav_bar-list-item">
                            <a href="/html/maMau.html">Mã màu</a>
                        </li>
                        <li class="nav_bar-list-item">Thông tin nhân viên</li>
                        <li class="nav_bar-list-item">Danh sách nhân viên</li>
                        <li class="nav_bar-list-item">Quản lí hợp đồng</li>
                        <li class="nav_bar-list-item">Điều chuyển nhân viên</li>
                    </ul>
                </div>

            </div>

            <div class="nav_bar-function">
                <div class="nav_bar-function-content close">
                    <i class="nav_bar-function-icon fa-solid fa-calendar-days fa-lg"></i>
                    <a href="#timekeeping-report.html">Báo cáo chấm công</a>
                    <div class="function-icon_arrow_Report">
                        <i class="nav_bar-function-icon fa-solid fa-angle-up"></i>
                    </div>
                </div>
                <div class="nav_bar-function_child">
                    <ul class="nav_bar-function_child_Report none">
                        <li class="nav_bar-list-item">Báo cáo theo tuần</li>
                        <li class="nav_bar-list-item">Danh sách ca</li>
                        <li class="nav_bar-list-item">Báo cáo theo tháng</li>
                        <li class="nav_bar-list-item">Danh sách chấm công</li>
                    </ul>

                </div>

            </div>

            <div class="nav_bar-function">
                <div class="nav_bar-function-content close">
                    <i class="nav_bar-function-icon fa-solid fa-envelopes-bulk fa-lg"></i>
                    <a href="#form-explaination.html">Đơn & giải trình</a>
                    <div class="function-icon_arrow_Assignment">
                        <i class="nav_bar-function-icon fa-solid fa-angle-up"></i>
                    </div>
                </div>
                <div class="nav_bar-function_child">
                    <ul class="nav_bar-function_child_Assignment none">
                        <li class="nav_bar-list-item">Quản lí đơn</li>
                        <li class="nav_bar-list-item">Đơn xin đổi ca</li>
                        <li class="nav_bar-list-item">Đơn giải trình</li>
                    </ul>
                </div>

            </div>
        </div>


        
        <!-- 80% -->
        <div class="grid_system_row container-content">
            <!-- search data  -->
            <div class="container-search"> 
                <div class ="search-box">
                    <div class="search-box_item">
                        <div for="department">Bộ phận</div>
                        <input type="text" placeholder="VD: Van Chuyen">
                    </div>
                    <div class="search-box_item">
                        <div for="identification">Mã nhân viên</div>
                        <input type="text" placeholder="VD: AB21210">
                    </div>
                    <div class="search-box_item">
                        <div for="name">Tên</div>
                        <input type="text" placeholder="VD: Nguyen Van A">
                    </div>
                </div>
                <div class="search-button">
                    <form action="">
                        <button type="submit" name="search">Tìm kiếm</button>
                    </form>
                </div>
            </div> 

            <div id="modalDialog" class="model">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4 class="modal-title">Add Data</h4>
                        </div>
                        <div class="modal-body">
                            <form action="{{ url_for('insert') }}" method="POST">
                                <div class="form-group">
                                    <label>First Name</label>
                                    <input type="text" class="form-control" name="first_name" required>
                                </div>

                                <div class="form-group">
                                    <label>Last Name</label>
                                    <input type="text" class="form-control" name="last_name" required>
                                </div>

                                <div class="form-group">
                                    <label>Address</label>
                                    <input type="text" class="form-control" name="address" required>
                                </div>
                                
                                <div class="form-group">
                                    <label>Date Of Birth</label>
                                    <input type="date" class="form-control" name="date_of_birth" required>
                                </div>

                                <div class="form-group">
                                    <label>Phone</label>
                                    <input type="text" class="form-control" name="phone" required>
                                </div>

                                <div class="form-group">
                                    <label>Email</label>
                                    <input type="text" class="form-control" name="email" required>
                                </div>

                                <div class="form-group">
                                    <label>Hire Date</label>
                                    <input type="date" class="form-control" name="hire_date" required>
                                </div>

                                <div class="form-group">
                                    <label>Department</label>
                                    <input type="text" class="form-control" name="department" required>
                                </div>

                                <div class="form-group">
                                    <label>Position</label>
                                    <input type="text" class="form-control" name="position" required>
                                </div>

                                <div class="form-group">
                                    <button class="btn btn-primary" type="submit">Add Data</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

            

            <!-- render data  -->
            <div class="form-data_manager">
                <div class="form-data_manager_report">
                    <p class="data_manager_report-text">Báo cáo từ ngày ... đến ngày ...</p>
                    <!-- Chuyển dữ liệu bảng thành file  -->
                    <script src="{{ url_for('static', filename='js/convert2Excel.js') }}"></script>
                    <button type="button" class="add-btn" data-toggle="modal" data-target="#myModal">Add Employee Data</button>
                    <button class="data_manager_report-btn" onclick="downloadExcel()">Export</button>
                </div>  

                <div class="form-data_manager-table">
                        <table id="information-table">
                            <tr>
                                <th>ID</th>
                                <th>First Name</th>
                                <th>Last Name</th>
                                <th>Address</th>
                                <th>Date Of Birth</th>
                                <th>Phone</th>
                                <th>Email</th>
                                <th>Hire Date</th>
                                <th>Department</th>
                                <th>Position</th>
                                <th>Acion</th>
                            </tr>
    
                            {% for row in employees %}
                            <tr>
                                <td>{{row.0}}</td>
                                <td>{{row.1}}</td>
                                <td>{{row.2}}</td>
                                <td>{{row.3}}</td>
                                <td>{{row.4}}</td>
                                <td>{{row.5}}</td>
                                <td>{{row.6}}</td>
                                <td>{{row.7}}</td>
                                <td>{{row.8}}</td>
                                <td>{{row.9}}</td>
                                <td>
                                    <a href="/update/{{row.0}}" class="">Update</a>
                                    <a href="/detele/{{row.0}}" class="update-btn">Delete</a>
                                </td>
                            </tr>
                            <div id="modalDialog{{row.0}}" class="model-upadated">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h4 class="modal-title">Update Data</h4>
                                        </div>
                                        <div class="modal-body">
                                            <form action="{{ url_for('update') }}" method="POST">
                                                <div class="form-group">
                                                    <label>First Name</label>
                                                    <input type="hidden" name="id" value="{{row.0}}">
                                                    <input type="text" class="form-control" name="first_name" value="{{row.1}}" required>
                                                </div>
                
                                                <div class="form-group">
                                                    <label>Last Name</label>
                                                    <input type="hidden" name="id" value="{row.0}">
                                                    <input type="text" class="form-control" name="last_name" value="{{row.2}}" required>
                                                </div>
                
                                                <div class="form-group">
                                                    <label>Address</label>
                                                    <input type="text" class="form-control" name="address" value="{{row.3}}" required>
                                                </div>
                                                
                                                <div class="form-group">
                                                    <label>Date Of Birth</label>
                                                    <input type="date" class="form-control" name="date_of_birth" value="{{row.4}}" required>
                                                </div>
                
                                                <div class="form-group">
                                                    <label>Phone</label>
                                                    <input type="text" class="form-control" name="phone" value="{{row.5}}" required>
                                                </div>
                
                                                <div class="form-group">
                                                    <label>Email</label>
                                                    <input type="text" class="form-control" name="email" value="{{row.6}}" required>
                                                </div>
                
                                                <div class="form-group">
                                                    <label>Hire Date</label>
                                                    <input type="date" class="form-control" name="hire_date" value="{{row.7}}" required>
                                                </div>
                
                                                <div class="form-group">
                                                    <label>Department</label>
                                                    <input type="text" class="form-control" name="department" value="{{row.8}}" required>
                                                </div>
                
                                                <div class="form-group">
                                                    <label>Position</label>
                                                    <input type="text" class="form-control" name="position" value="{{row.9}}" required>
                                                </div>
                
                                                <div class="form-group">
                                                    <button class="btn btn-primary" type="submit">Update Data</button>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            {% endfor  %}
                        </table>
                </div>
            </div>
        </div>
    </div>
    <nav>

    </nav>
</body>
<script src="{{ url_for('static', filename='js/index.js') }}"></script>
</html>
